{% extends 'main.html' %}
{% block content %}

{% if form.errors %}
    <ul>
        {% for field, errors in form.errors.items %}
            <li>{{ field }}: {{ errors|join:", " }}</li>
        {% endfor %}
    </ul>
{% endif %}

<div>
    <form method="POST" action="">
        {% csrf_token %}
        {{form.as_p}}
        <input type="submit" value="Submit">
    </form>
</div>
<script>
    document.addEventListener('DOMContentLoaded', function() {
        // ID generated by Django as id_<field_name>
        const topicSelect = document.querySelector('#id_topic');
        const newTopicInput = document.querySelector('#id_new_topic');

        topicSelect.addEventListener('change', function() {
            newTopicInput.disabled = topicSelect.value !== '';
            newTopicInput.value = '';
        });

        newTopicInput.addEventListener('input', function() {
            topicSelect.disabled = newTopicInput.value !== '';
            topicSelect.value = ''; 
        });
    });
</script>
{% endblock %}